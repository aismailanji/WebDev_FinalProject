<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random FFXIV Lore</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        body {
            background-color: floralwhite;
        }
        .lore-container {
            text-emphasis-color: blue;
            padding: 10px;
        }
        .lore-card {
            background-color: lavender;
            border: 2px solid deeppink;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-top: 20px;
        }
        .btn-success {
            background-color: darkcyan;
            border-color: darkcyan;
        }
    </style>
</head>
<body>


<!-- header -->
    <div class="container">
        <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom navbar-dark">
          <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
            <img src="/images/meteor_flat.png" width="50" height="50" alt="Logo">
            <span class="fs-4">&nbsp;&nbsp;Random FFXIV Lore</span>
          </a>
        </header>
    </div>
    

<!-- hero -->
    <div class="container my-5">
    <div class="row p-4 pb-0 pe-lg-0 pt-lg-5 align-items-center rounded-3 border shadow-lg">
      <div class="col-lg-7 p-3 p-lg-5 pt-lg-3">
        <h1 class="display-4 fw-bold lh-1 text-body-emphasis">Have you heard of the critically acclaimed MMORPG Final Fantasy XIV?</h1>
        <p class="lead">Have you ever wanted some random piece of lore about this critically acclaimed MMORPG? Me too!</p>
        <p class="lead"><strong>Click the button below to see some lore randomly picked from NPC dialogue in the world!</strong></p>
        <div class="d-grid gap-2 d-md-flex justify-content-md-start mb-4 mb-lg-3">
          <button id="fetch-lore" type="button" class="btn btn-success btn-lg px-4 me-md-2 fw-bold">Give me lore please!</button>
        </div>
      </div>
      <div class="col-lg-4 offset-lg-1 p-0 overflow-hidden shadow-lg">
          <img class="rounded-lg-3" src="/images/y'shtola.jpg" alt="An image of Y'shtola Rhul from FFXIV. She is a Miqo'te woman with greyish-white eyes, white short hair with bangs, cat ears, and clan marks on her face. Her outfit is a black dress with grey fur and a criss-cross detail in the front, as well as a choker with a snake detail and a purple gem. She also has a black mage staff of black wood wrapping around a purple orb. She is looking to her right." width="720">
      </div>
    </div>
    </div>


<!-- displaying the lore text -->
    <div class="container">
        <div id="lore-container" class="lore-card">
            <h2 class="text-body-emphasis">New piece of lore!</h2>
            <p id="lore-text" class="lead"><strong>Final Fantasy XIV!</strong></p>
        </div>
    </div>


<!-- footer -->
    <div class="container">
        <footer class="py-3 my-4">
        <p class="justify-content-center border-bottom pb-3 mb-3"></p>
        <p class="text-center text-body-secondary">Thank you for visiting!</p>
        <p class="text-center text-body-secondary">SPRING 2024</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script> 
        document.getElementById('fetch-lore').addEventListener('click', async () => {
        console.log('Button clicked'); // debugging
        try {
            const response = await fetch('/lore');
            console.log('Request sent'); // debugging
            const data = await response.json();
            console.log('Data received:', data); // debugging
            document.getElementById('lore-text').innerText = data.lore; // replace text with received data
        } catch (error) {
            console.error('Error fetching lore:', error); // error message
            document.getElementById('lore-text').innerText = 'Failed to load.';
        }
        });
    </script>
</body>
</html>